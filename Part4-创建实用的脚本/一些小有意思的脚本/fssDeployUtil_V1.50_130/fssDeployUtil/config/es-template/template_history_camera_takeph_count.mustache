{"template":"{\"_source\": { {{#is_includes}} \"includes\": {{#toJson}}includes{{/toJson}}{{#is_excludes}},{{/is_excludes}} {{/is_includes}}  {{#is_excludes}} \"excludes\": {{#toJson}}excludes{{/toJson}}  {{/is_excludes}}  },\"query\":{\"function_score\":{\"query\":{\"bool\":{\"filter\":{}{{#enter_time_start}}{{#enter_time_end}},\"filter\":{\"range\":{\"enter_time\":{\"gte\":\"{{enter_time_start}}\",\"lte\":\"{{enter_time_end}}\",\"format\":\"yyyy-MM-dd HH:mm:ss\",\"time_zone\":\"+08:00\"}}}{{/enter_time_end}}{{/enter_time_start}}{{#is_camera}},\"filter\":{\"bool\":{\"should\":{\"terms\":{\"camera_id\":{{#toJson}}camera_id{{/toJson}}}}}}{{/is_camera}}}}}},{{#camera_aggregation}}\"aggs\":{\"group_by_camera\":{\"terms\":{\"field\":\"camera_id\",\"size\":\"{{camera_top_num}}{{^camera_top_num}}10{{/camera_top_num}}\",\"order\":{\"_count\":\"desc\"}},\"aggs\":{\"camera_hits\":{\"top_hits\":{\"_source\":{\"includes\":[\"camera_name\",\"office_id\",\"office_name\",\"gps_xy\"]},\"size\":1}}}}}{{/camera_aggregation}}{{#camera_aggregation}},{{/camera_aggregation}}\"from\":{{from}},\"size\":{{size}},\"sort\":[{{#sort_field1}}{{#sort_order1}}{\"{{sort_field1}}\":{\"order\":\"{{sort_order1}}\"}},{{/sort_order1}}{{/sort_field1}}{{#sort_field2}}{{#sort_order2}}{\"{{sort_field2}}\":{\"order\":\"{{sort_order2}}\"}},{{/sort_order2}}{{/sort_field2}}\"_score\"]}"}