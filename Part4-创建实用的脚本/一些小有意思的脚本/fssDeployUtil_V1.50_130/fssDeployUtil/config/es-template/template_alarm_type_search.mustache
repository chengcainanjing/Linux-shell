
{"template":"{\"query\":{\"function_score\":{\"query\":{\"bool\":{\"filter\":{}{{#enter_time_start}}{{#enter_time_end}},\"filter\":{\"range\":{\"enter_time\":{\"gte\":\"{{enter_time_start}}\",\"lte\":\"{{enter_time_end}}\",\"format\":\"yyyy-MM-dd HH:mm:ss\",\"time_zone\":\"+08:00\"}}}{{/enter_time_end}}{{/enter_time_start}}{{#is_camera}},\"filter\":{\"bool\":{\"should\":{\"terms\":{\"camera_id\":{{#toJson}}camera_id{{/toJson}}}}}}{{/is_camera}}{{#is_control_event}},\"filter\":{\"bool\":{\"should\":{\"terms\":{\"lib_id\":{{#toJson}}control_event_id{{/toJson}}}}}}{{/is_control_event}}{{#is_office}},\"filter\":{\"bool\":{\"should\":{\"terms\":{\"office_id\":{{#toJson}}office_id{{/toJson}}}}}}{{/is_office}}}}{{#is_calcSim}},\"script_score\":{\"script\":{\"lang\":\"native\",\"inline\":\"feature-comp\",\"params\":{\"featureName\":\"{{feature_name}}\",\"filterType\":\"{{filter_type}}\",\"featureValue\":[\"{{#feature_value}}\",\"{{.}}\",\"{{/feature_value}}\"]}}},\"min_score\":{{sim_threshold}}{{/is_calcSim}}}},\"from\":{{from}},\"size\":{{size}},\"sort\":[{{#sortField}}{{#sortOrder}}{\"{{sortField}}\":{\"order\":\"{{sortOrder}}\"}},{{/sortOrder}}{{/sortField}}\"_score\"]}"}