{"template":"{\"_source\": { {{#is_includes}} \"includes\": {{#toJson}}includes{{/toJson}}{{#is_excludes}},{{/is_excludes}} {{/is_includes}}  {{#is_excludes}} \"excludes\": {{#toJson}}excludes{{/toJson}}  {{/is_excludes}}  },\"query\":{\"bool\":{\"filter\":{}
{{#start_time}}{{#end_time}},\"filter\":{\"range\":{\"modify_time\":{\"gte\":\"{{start_time}}\",\"lte\":\"{{end_time}}\",\"format\":\"yyyy-MM-dd HH:mm:ss\",\"time_zone\":\"+08:00\"}}}{{/end_time}}{{/start_time}}{{#is_lib}},\"filter\":{\"terms\":{\"lib_id\":{{#toJson}}lib_id{{/toJson}}}}{{/is_lib}}{{#is_personlib}},\"filter\":{\"terms\":{\"personlib_type\":{{#toJson}}personlib_type{{/toJson}}}}{{/is_personlib}}{{#is_del}},\"filter\":{\"term\":{\"is_del\":{{is_del}}}}{{/is_del}}{{#addr}},\"filter\":{\"wildcard\":{\"room_number\":\"*{{addr}}*\"}}{{/addr}}{{#age_group}},\"filter\":{\"bool\":{\"filter\":{}{{#teenage_start}}{{#teenage_end}},\"should\":{\"range\":{\"birth\":{\"gt\":\"{{teenage_start}}\",\"lte\":\"{{teenage_end}}\"}}}{{/teenage_end}}{{/teenage_start}}{{#youth_start}}{{#youth_end}},\"should\":{\"range\":{\"birth\":{\"gt\":\"{{youth_start}}\",\"lte\":\"{{youth_end}}\"}}}{{/youth_end}}{{/youth_start}}{{#midlife_start}}{{#midlife_end}},\"should\":{\"range\":{\"birth\":{\"gt\":\"{{midlife_start}}\",\"lte\":\"{{midlife_end}}\"}}}{{/midlife_end}}{{/midlife_start}}{{#old_end}},\"should\":{\"range\":{\"birth\":{\"lte\":\"{{old_end}}\"}}}{{/old_end}},\"minimum_should_match\":1}}{{/age_group}}}}{{#is_aggs}},\"aggs\":{\"sex_group\":{\"terms\":{\"field\":\"sex\",\"size\":\"10\"}},\"flag_group\":{\"terms\":{\"field\":\"personlib_type\",\"size\":\"10\"},\"aggs\":{\"flag_count\":{\"terms\":{\"field\":\"flag\",\"size\":\"10\"}}}},\"time_group\":{\"date_range\":{\"field\":\"create_time\",\"format\":\"yyyy-MM-dd HH:mm:ss\",\"time_zone\":\"+08:00\",\"ranges\":[{\"key\":\"last_day\",\"from\":\"now-1d\",\"to\":\"now\"},{\"key\":\"last_week\",\"from\":\"now-7d\",\"to\":\"now\"},{\"key\":\"last_month\",\"from\":\"now-1M\",\"to\":\"now\"},{\"key\":\"last_half_year\",\"from\":\"now-6M\",\"to\":\"now\"},{\"key\":\"last_year\",\"from\":\"now-1y\",\"to\":\"now\"},{\"key\":\"before_one_year\",\"to\":\"now-1y\"}]}}}{{/is_aggs}},\"from\":{{from}},\"size\":{{size}},\"sort\":[{}{{#sort_field1}}{{#sort_order1}},{\"{{sort_field1}}\":{\"order\":\"{{sort_order1}}\"}}{{/sort_order1}}{{/sort_field1}}{{#sort_field2}}{{#sort_order2}},{\"{{sort_field2}}\":{\"order\":\"{{sort_order2}}\"}}{{/sort_order2}}{{/sort_field2}}]}"}