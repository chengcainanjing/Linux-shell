{"template": "{\"_source\": { {{#is_includes}} \"includes\": {{#toJson}}includes{{/toJson}}{{#is_excludes}},{{/is_excludes}} {{/is_includes}}  {{#is_excludes}} \"excludes\": {{#toJson}}excludes{{/toJson}}  {{/is_excludes}}  },\"query\":{\"function_score\":{\"query\":{\"bool\":{ \"filter\":{\"range\":{\"enter_time\":{\"gte\":\"{{enter_time_start}}\",\"lte\":\"{{enter_time_end}}\",\"format\":\"yyyy-MM-dd HH:mm:ss\",\"time_zone\":\"+08:00\"}}}{{#is_lopq}},\"filter\":{\"feature\":{\"rt_feature\":{\"feature\":[\"{{#feature_value}}\",\"{{.}}\",\"{{/feature_value}}\"],\"coarseEncode\":\"{{coarse_encode}}{{^coarse_encode}}true{{/coarse_encode}}\",\"lopqEncode\":\"{{lopq_encode}}{{^lopq_encode}}false{{/lopq_encode}}\"}}}{{/is_lopq}}{{#is_office}},\"filter\":{\"bool\":{\"should\":{\"terms\":{\"office_id\":{{#toJson}}office_id{{/toJson}}}}}}{{/is_office}}{{#is_camera}},\"filter\":{\"bool\":{\"should\":{\"terms\":{\"camera_id\":{{#toJson}}camera_id{{/toJson}}}}}}{{/is_camera}}}},\"script_score\":{\"script\":{\"lang\":\"native\",\"inline\":\"feature-comp\",\"params\":{\"featureName\":\"{{feature_name}}\",\"featureValue\":[\"{{#feature_value}}\",\"{{.}}\",\"{{/feature_value}}\"],\"filterType\":\"{{filter_type}}\"}}},\"min_score\":{{sim_threshold}}}},\"from\":{{from}},\"size\":{{size}},\"sort\":[{{#sortField}}{{#sortOrder}}{\"{{sortField}}\":{\"order\":\"{{sortOrder}}\"}},{{/sortOrder}}{{/sortField}}\"_score\"]}"}
